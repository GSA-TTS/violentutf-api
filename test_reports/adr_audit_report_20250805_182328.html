<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Architectural Audit Report - Code quality and compliance analysis">

    <!-- Security Headers -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; font-src 'self'; connect-src 'none'; frame-src 'none'; object-src 'none'; base-uri 'self'; form-action 'none';">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta name="referrer" content="no-referrer">

    <title>Architectural Audit Report - 2025-08-05 18:23:28</title>

    <!-- Chart.js for visualizations (local copy for security) -->
    <script src="static/js/chart.min.js"></script>

    <!-- Custom styles -->
    <style>
/* Main styles for Architectural Audit Report */

/* CSS Variables */
:root {
    --primary-color: #1976d2;
    --primary-dark: #115293;
    --secondary-color: #424242;
    --success-color: #4caf50;
    --warning-color: #ff9800;
    --danger-color: #f44336;
    --info-color: #2196f3;

    --text-primary: #212121;
    --text-secondary: #757575;
    --text-light: #ffffff;

    --bg-color: #f5f5f5;
    --card-bg: #ffffff;
    --border-color: #e0e0e0;

    --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
    --shadow-md: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);
    --shadow-lg: 0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23);

    --border-radius: 8px;
    --transition: all 0.3s cubic-bezier(.25,.8,.25,1);
}

/* Reset and Base Styles */
* {
    box-sizing: border-box;
}

body {
    margin: 0;
    padding: 0;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    font-size: 16px;
    line-height: 1.6;
    color: var(--text-primary);
    background-color: var(--bg-color);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* Layout Container */
.report-container {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

/* Header Styles */
.report-header {
    background: var(--card-bg);
    border-bottom: 1px solid var(--border-color);
    box-shadow: var(--shadow-sm);
    position: sticky;
    top: 0;
    z-index: 100;
}

.header-content {
    max-width: 1400px;
    margin: 0 auto;
    padding: 2rem;
}

.report-title {
    margin: 0 0 1rem 0;
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--primary-color);
}

.header-meta {
    display: flex;
    gap: 2rem;
    flex-wrap: wrap;
}

.meta-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--text-secondary);
    font-size: 0.9rem;
}

.icon {
    fill: currentColor;
    flex-shrink: 0;
}

/* Navigation */
.report-nav {
    background: var(--primary-color);
    box-shadow: var(--shadow-sm);
    position: sticky;
    top: 0;
    z-index: 99;
}

.nav-list {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0;
    list-style: none;
    display: flex;
    flex-wrap: wrap;
    gap: 0;
}

.nav-link {
    display: block;
    padding: 1rem 1.5rem;
    color: var(--text-light);
    text-decoration: none;
    font-weight: 500;
    transition: var(--transition);
    position: relative;
}

.nav-link:hover {
    background: rgba(255, 255, 255, 0.1);
}

.nav-link::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--text-light);
    transform: scaleX(0);
    transition: transform 0.3s ease;
}

.nav-link:hover::after,
.nav-link.active::after {
    transform: scaleX(1);
}

/* Main Content */
.report-content {
    flex: 1;
    max-width: 1400px;
    margin: 0 auto;
    padding: 2rem;
    width: 100%;
}

/* Hero Section */
.hero-section {
    background: var(--card-bg);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-md);
    padding: 3rem;
    margin-bottom: 2rem;
}

.compliance-score-container {
    display: grid;
    grid-template-columns: 300px 1fr;
    gap: 3rem;
    align-items: center;
}

/* Score Circle */
.score-circle {
    position: relative;
    width: 250px;
    height: 250px;
    margin: 0 auto;
}

.score-circle svg {
    transform: rotate(-90deg);
    width: 100%;
    height: 100%;
}

.score-bg {
    fill: none;
    stroke: #e0e0e0;
    stroke-width: 10;
}

.score-progress {
    fill: none;
    stroke: var(--primary-color);
    stroke-width: 10;
    stroke-linecap: round;
    stroke-dasharray: 565;
    transition: stroke-dashoffset 1.5s ease-out;
}

.score-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
}

.score-value {
    display: block;
    font-size: 3rem;
    font-weight: 700;
    color: var(--primary-color);
    line-height: 1;
}

.score-label {
    display: block;
    font-size: 1.2rem;
    color: var(--text-secondary);
    margin-top: 0.5rem;
}

/* Summary Stats */
.summary-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1.5rem;
}

.stat-card {
    background: var(--bg-color);
    padding: 1.5rem;
    border-radius: var(--border-radius);
    text-align: center;
}

.stat-value {
    font-size: 2rem;
    font-weight: 700;
    color: var(--primary-color);
    margin-bottom: 0.5rem;
}

.stat-label {
    font-size: 0.9rem;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.stat-card.risk-critical .stat-value {
    color: var(--danger-color);
}

/* Sections */
.section,
.report-section {
    background: var(--card-bg);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-sm);
    padding: 2rem;
    margin-bottom: 2rem;
}

.section h2,
.section-title {
    margin: 0 0 1.5rem 0;
    font-size: 1.8rem;
    font-weight: 600;
    color: var(--text-primary);
    padding-bottom: 1rem;
    border-bottom: 2px solid var(--border-color);
}

.section h3 {
    margin: 1.5rem 0 1rem 0;
    font-size: 1.3rem;
    font-weight: 600;
    color: var(--text-primary);
}

/* Executive Summary */
.summary-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
}

.summary-card {
    background: var(--bg-color);
    padding: 1.5rem;
    border-radius: var(--border-radius);
}

.summary-card h3 {
    margin: 0 0 1rem 0;
    font-size: 1.1rem;
    color: var(--text-secondary);
    font-weight: 500;
}

.score-display {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.score-indicator {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    flex-shrink: 0;
}

.score-indicator.critical { background: var(--danger-color); }
.score-indicator.high { background: #ff5722; }
.score-indicator.medium { background: var(--warning-color); }
.score-indicator.low { background: var(--success-color); }

.violations-breakdown .total {
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--primary-color);
    margin-bottom: 0.5rem;
}

.violations-breakdown .breakdown {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    font-size: 0.9rem;
}

.violations-breakdown .critical { color: var(--danger-color); }
.violations-breakdown .high { color: #ff5722; }
.violations-breakdown .medium { color: var(--warning-color); }
.violations-breakdown .low { color: var(--success-color); }

.debt-display {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.debt-days {
    font-size: 2rem;
    font-weight: 700;
    color: var(--primary-color);
}

.debt-hours {
    font-size: 0.9rem;
    color: var(--text-secondary);
}

.risk-level {
    font-size: 1.5rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.risk-description {
    font-size: 0.9rem;
    color: var(--text-secondary);
    margin-top: 0.5rem;
}

/* Key Findings */
.key-findings {
    background: #e3f2fd;
    padding: 1.5rem;
    border-radius: var(--border-radius);
    border-left: 4px solid var(--primary-color);
}

.key-findings h3 {
    margin: 0 0 1rem 0;
    color: var(--primary-color);
}

.key-findings ul {
    margin: 0;
    padding-left: 1.5rem;
}

.key-findings li {
    margin-bottom: 0.5rem;
}

/* Tables */
table {
    width: 100%;
    border-collapse: collapse;
    margin: 1rem 0;
}

th, td {
    padding: 0.75rem;
    text-align: left;
    border-bottom: 1px solid var(--border-color);
}

th {
    background: var(--bg-color);
    font-weight: 600;
    color: var(--text-secondary);
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

tr:hover {
    background: rgba(0, 0, 0, 0.02);
}

/* Risk Indicators */
.risk-indicator {
    display: inline-block;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    margin-right: 0.5rem;
}

.risk-critical { color: var(--danger-color); }
.risk-high { color: #ff5722; }
.risk-medium { color: var(--warning-color); }
.risk-low { color: var(--success-color); }

/* Badges */
.badge {
    display: inline-block;
    padding: 0.25rem 0.75rem;
    border-radius: 1rem;
    font-size: 0.85rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.badge-critical {
    background: #ffebee;
    color: var(--danger-color);
}

.badge-high {
    background: #fff3e0;
    color: #ff5722;
}

.badge-medium {
    background: #fff8e1;
    color: var(--warning-color);
}

.badge-low {
    background: #e8f5e9;
    color: var(--success-color);
}

.badge-internal {
    background: var(--primary-color);
    color: white;
}

/* Charts */
.charts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
}

.chart-container {
    background: var(--card-bg);
    padding: 1.5rem;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-sm);
}

.chart-container.full-width {
    grid-column: 1 / -1;
}

.chart-container h3 {
    margin: 0 0 1rem 0;
    color: var(--text-primary);
    font-size: 1.1rem;
}

.chart-container canvas {
    max-height: 300px;
}

.chart-wrapper {
    position: relative;
    height: 300px;
}

/* Risk Distribution */
.risk-distribution {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
    align-items: center;
}

.risk-table {
    width: 100%;
}

.risk-table td:first-child {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

/* Metadata Grid */
.metadata-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1rem;
    background: var(--bg-color);
    padding: 1.5rem;
    border-radius: var(--border-radius);
}

.metadata-item label {
    display: block;
    font-size: 0.85rem;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 0.25rem;
}

.metadata-item value {
    display: block;
    font-size: 1rem;
    color: var(--text-primary);
    font-weight: 500;
}

/* Footer */
.report-footer {
    background: var(--secondary-color);
    color: var(--text-light);
    padding: 2rem;
    margin-top: auto;
}

.footer-content {
    max-width: 1400px;
    margin: 0 auto;
    text-align: center;
}

.footer-content p {
    margin: 0.5rem 0;
}

.security-level {
    font-size: 0.9rem;
}

.generation-info {
    font-size: 0.85rem;
    color: rgba(255, 255, 255, 0.7);
}

/* Responsive Design */
@media (max-width: 1200px) {
    .compliance-score-container {
        grid-template-columns: 1fr;
        text-align: center;
    }

    .score-circle {
        margin-bottom: 2rem;
    }
}

@media (max-width: 768px) {
    .header-content,
    .report-content {
        padding: 1rem;
    }

    .report-title {
        font-size: 1.8rem;
    }

    .nav-list {
        flex-direction: column;
    }

    .nav-link {
        padding: 0.75rem 1rem;
    }

    .hero-section {
        padding: 1.5rem;
    }

    .summary-stats {
        grid-template-columns: 1fr;
    }

    .risk-distribution {
        grid-template-columns: 1fr;
    }

    .charts-grid {
        grid-template-columns: 1fr;
    }
}

/* Print Styles */
@media print {
    body {
        background: white;
        color: black;
    }

    .report-nav,
    .report-footer {
        display: none;
    }

    .report-header {
        position: static;
        box-shadow: none;
        border-bottom: 2px solid black;
    }

    .section {
        box-shadow: none;
        page-break-inside: avoid;
        border: 1px solid #ccc;
    }

    a {
        color: black;
        text-decoration: underline;
    }
}

/* Animations */
@keyframes scoreAnimation {
    from {
        stroke-dashoffset: 565;
    }
}

/* Utility Classes */
.text-center { text-align: center; }
.text-right { text-align: right; }
.text-muted { color: var(--text-secondary); }
.mb-0 { margin-bottom: 0; }
.mb-1 { margin-bottom: 0.5rem; }
.mb-2 { margin-bottom: 1rem; }
.mb-3 { margin-bottom: 1.5rem; }
.mb-4 { margin-bottom: 2rem; }    </style>

</head>
<body>
    <div class="report-container">
        <!-- Header -->
        <header class="report-header">
            <div class="header-content">
                <h1 class="report-title">Architectural Audit Report</h1>
                <div class="header-meta">
                    <span class="meta-item">
                        <svg class="icon" viewBox="0 0 24 24" width="16" height="16">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
                        </svg>
                        2025-08-05 18:23:28
                    </span>
                    <span class="meta-item">
                        <svg class="icon" viewBox="0 0 24 24" width="16" height="16">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                        Version 2.0.1
                    </span>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="report-nav" id="report-nav" role="navigation" aria-label="Report sections">
            <ul class="nav-list" role="list">
                <li><a href="#summary" class="nav-link">Summary</a></li>
                <li><a href="#executive" class="nav-link">Executive Summary</a></li>
                <li><a href="#adr-analysis-details" class="nav-link">ADR Analysis</a></li>
                <li><a href="#analysis-timeline" class="nav-link">Analysis Timeline</a></li>
                <li><a href="#hotspots" class="nav-link">Hotspots</a></li>
                <li><a href="#violations" class="nav-link">Violations</a></li>
                <li><a href="#recommendations" class="nav-link">Recommendations</a></li>
                <li><a href="#visualizations" class="nav-link">Visualizations</a></li>
            </ul>
        </nav>

        <!-- Main content -->
        <main class="report-content">
    <!-- Compliance Score Hero -->
    <section class="hero-section">
        <div class="compliance-score-container">
            <div class="score-circle" data-score="73.5">
                <svg viewBox="0 0 200 200">
                    <circle cx="100" cy="100" r="90" class="score-bg"/>
                    <circle cx="100" cy="100" r="90" class="score-progress"
                            style="stroke-dashoffset: 149.72500000000002"/>
                </svg>
                <div class="score-text">
                    <span class="score-value">73.5%</span>
                    <span class="score-label">Compliance</span>
                </div>
            </div>

            <div class="summary-stats">
                <div class="stat-card">
                    <div class="stat-value">156</div>
                    <div class="stat-label">Files Analyzed</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">3</div>
                    <div class="stat-label">Total Violations</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">1</div>
                    <div class="stat-label">Technical Debt (Days)</div>
                </div>
                <div class="stat-card risk-medium">
                    <div class="stat-value">MEDIUM</div>
                    <div class="stat-label">Risk Level</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Executive Summary -->
<div class="executive-summary section">
    <h2>Executive Summary</h2>

    <div class="summary-grid">
        <div class="summary-card">
            <h3>Compliance Score</h3>
            <div class="score-display">
                <span class="score-value">73.5%</span>
                <div class="score-indicator warning"></div>
            </div>
        </div>

        <div class="summary-card">
            <h3>Total Violations</h3>
            <div class="violations-breakdown">
                <div class="total">3</div>
                <div class="breakdown">
                    <span class="critical">Critical: 1</span>
                    <span class="high">High: 1</span>
                    <span class="medium">Medium: 1</span>
                    <span class="low">Low: 0</span>
                </div>
            </div>
        </div>

        <div class="summary-card">
            <h3>Technical Debt</h3>
            <div class="debt-display">
                <span class="debt-days">1.6 days</span>
                <span class="debt-hours">(13.0 hours)</span>
            </div>
        </div>

        <div class="summary-card">
            <h3>Risk Assessment</h3>
            <div class="risk-level ">

            </div>
            <div class="risk-description"></div>
        </div>
    </div>

    <div class="key-findings">
        <h3>Key Findings</h3>
        <ul>
            <li>Warning: Overall compliance score is 73.5%, improvements needed</li>
            <li>Found 1 critical violations requiring immediate remediation</li>
        </ul>
    </div>
</div>
    <!-- Risk Overview -->
    <section id="risk-overview" class="report-section">
        <h2 class="section-title">Risk Overview</h2>

        <div class="risk-distribution">
            <div class="chart-wrapper">
                <canvas id="risk-distribution-chart"></canvas>
            </div>

            <div class="risk-breakdown">
                <table class="risk-table">
                    <thead>
                        <tr>
                            <th>Risk Level</th>
                            <th>Count</th>
                            <th>Percentage</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="risk-critical">
                            <td><span class="risk-indicator"></span> Critical</td>
                            <td>1</td>
                            <td>33.3%</td>
                        </tr>
                        <tr class="risk-high">
                            <td><span class="risk-indicator"></span> High</td>
                            <td>1</td>
                            <td>33.3%</td>
                        </tr>
                        <tr class="risk-medium">
                            <td><span class="risk-indicator"></span> Medium</td>
                            <td>1</td>
                            <td>33.3%</td>
                        </tr>
                        <tr class="risk-low">
                            <td><span class="risk-indicator"></span> Low</td>
                            <td>0</td>
                            <td>0.0%</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- ADR Analysis Details -->
<!-- ADR Analysis Details Section -->
<section id="adr-analysis-details" class="report-section">
    <h2 class="section-title">ADR Compliance Analysis Details</h2>

    <div class="adr-analysis-container">
        <div class="adr-detail-card" data-adr-id="ADR-001">
            <div class="adr-header">
                <h3>ADR-001: API Authentication Strategy</h3>
                <div class="adr-score">
                    <span class="score-badge score-4">
                        85%
                    </span>
                </div>
            </div>

            <div class="adr-content">
                <!-- Analysis Methods Used -->
                <div class="analysis-methods">
                    <h4>Analysis Methods</h4>
                    <div class="method-badges">
                        <span class="method-badge method-semantic-claude-code">
                            Semantic Claude Code
                        </span>
                        <span class="method-badge method-static-analysis">
                            Static Analysis
                        </span>
                        <span class="method-badge method-git-forensics">
                            Git Forensics
                        </span>
                        <span class="method-badge method-rag-enhanced">
                            Rag Enhanced
                        </span>
                    </div>
                    <div class="confidence-indicator">
                        <label>Composite Confidence:</label>
                        <span class="confidence-value">92.0%</span>
                    </div>
                </div>

                <!-- Requirements Analysis -->
                <div class="requirements-section">
                    <h4>Requirements (5)</h4>
                    <ul class="requirements-list">
                        <li class="requirement-item">
                            <span class="req-text">All API endpoints must use JWT authentication</span>
                        </li>
                        <li class="requirement-item">
                            <span class="req-text">Tokens must expire within 15 minutes</span>
                        </li>
                        <li class="requirement-item">
                            <span class="req-text">Refresh tokens must be used for session management</span>
                        </li>
                        <li class="requirement-item">
                            <span class="req-text">API keys must be hashed using bcrypt</span>
                        </li>
                        <li class="requirement-item">
                            <span class="req-text">Rate limiting must be applied per API key</span>
                        </li>
                    </ul>
                </div>

                <!-- Violations Summary -->
                <div class="violations-summary">
                    <h4>Violations (2)</h4>
                    <div class="violation-breakdown">
                        <div class="risk-counts">
                            <span class="risk-count critical">
                                Critical: 0
                            </span>
                            <span class="risk-count high">
                                High: 1
                            </span>
                            <span class="risk-count medium">
                                Medium: 1
                            </span>
                            <span class="risk-count low">
                                Low: 0
                            </span>
                        </div>

                        <!-- Top Violations -->
                        <div class="top-violations">
                            <div class="violation-item risk-high">
                                <div class="violation-header">
                                    <span class="risk-badge">HIGH</span>
                                    <span class="violation-file">app/api/endpoints/users.py</span>
                                    <span class="line-number">Line 45</span>
                                </div>
                                <div class="violation-description">
                                    API endpoint missing JWT authentication
                                </div>
                                <div class="violation-evidence">
                                    <label>Evidence:</label>
                                    <code>@app.get(&#39;/users/{user_id}&#39;) # No auth decorator</code>
                                </div>
                            </div>
                            <div class="violation-item risk-medium">
                                <div class="violation-header">
                                    <span class="risk-badge">MEDIUM</span>
                                    <span class="violation-file">app/core/auth.py</span>
                                    <span class="line-number">Line 123</span>
                                </div>
                                <div class="violation-description">
                                    Token expiration set to 60 minutes instead of 15
                                </div>
                                <div class="violation-evidence">
                                    <label>Evidence:</label>
                                    <code>expires_delta=timedelta(minutes=60)</code>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Compliant Areas -->
                <div class="compliant-areas">
                    <h4>Compliant Areas (4)</h4>
                    <ul class="compliant-list">
                        <li class="compliant-item">
                            <span class="check-icon">✓</span>
                            JWT implementation using industry-standard library
                        </li>
                        <li class="compliant-item">
                            <span class="check-icon">✓</span>
                            Proper token validation in middleware
                        </li>
                        <li class="compliant-item">
                            <span class="check-icon">✓</span>
                            Secure token storage practices
                        </li>
                        <li class="more-items">... and 1 more</li>
                    </ul>
                </div>

                <!-- Multi-dimensional Insights -->
                <div class="insights-section">
                    <h4>Multi-dimensional Insights</h4>
                    <div class="insights-list">
                        <div class="insight-item">
                            <span class="insight-type">Security:</span>
                            <span class="insight-text">Authentication coverage at 85% - critical gaps in user endpoints</span>
                        </div>
                        <div class="insight-item">
                            <span class="insight-type">Performance:</span>
                            <span class="insight-text">Token validation adds ~50ms latency per request</span>
                        </div>
                        <div class="insight-item">
                            <span class="insight-type">Maintenance:</span>
                            <span class="insight-text">Authentication logic well-modularized and testable</span>
                        </div>
                    </div>
                </div>

                <!-- Performance Metrics -->
                <div class="performance-metrics">
                    <h4>Analysis Performance</h4>
                    <div class="metrics-grid">
                        <div class="metric">
                            <label>Execution Time:</label>
                            <value>3s</value>
                        </div>
                        <div class="metric">
                            <label>Cache Hit Rate:</label>
                            <value>65.0%</value>
                        </div>
                        <div class="metric">
                            <label>Tools Executed:</label>
                            <value>3</value>
                        </div>
                    </div>
                </div>
            </div>

            <div class="adr-actions">
                <button class="btn btn-secondary" onclick="toggleADRDetails('ADR-001')">
                    Show More Details
                </button>
                <button class="btn btn-primary" onclick="showRemediationPlan('ADR-001')">
                    View Remediation Plan
                </button>
            </div>
        </div>
        <div class="adr-detail-card" data-adr-id="ADR-002">
            <div class="adr-header">
                <h3>ADR-002: RBAC Authorization Model</h3>
                <div class="adr-score">
                    <span class="score-badge score-3">
                        62%
                    </span>
                </div>
            </div>

            <div class="adr-content">
                <!-- Analysis Methods Used -->
                <div class="analysis-methods">
                    <h4>Analysis Methods</h4>
                    <div class="method-badges">
                        <span class="method-badge method-semantic-claude-code">
                            Semantic Claude Code
                        </span>
                        <span class="method-badge method-static-analysis">
                            Static Analysis
                        </span>
                    </div>
                    <div class="confidence-indicator">
                        <label>Composite Confidence:</label>
                        <span class="confidence-value">88.0%</span>
                    </div>
                </div>

                <!-- Requirements Analysis -->
                <div class="requirements-section">
                    <h4>Requirements (3)</h4>
                    <ul class="requirements-list">
                        <li class="requirement-item">
                            <span class="req-text">All endpoints must validate user roles</span>
                        </li>
                        <li class="requirement-item">
                            <span class="req-text">Role hierarchy must be enforced</span>
                        </li>
                        <li class="requirement-item">
                            <span class="req-text">Permission checks must be granular</span>
                        </li>
                    </ul>
                </div>

                <!-- Violations Summary -->
                <div class="violations-summary">
                    <h4>Violations (1)</h4>
                    <div class="violation-breakdown">
                        <div class="risk-counts">
                            <span class="risk-count critical">
                                Critical: 1
                            </span>
                            <span class="risk-count high">
                                High: 0
                            </span>
                            <span class="risk-count medium">
                                Medium: 0
                            </span>
                            <span class="risk-count low">
                                Low: 0
                            </span>
                        </div>

                        <!-- Top Violations -->
                        <div class="top-violations">
                            <div class="violation-item risk-critical">
                                <div class="violation-header">
                                    <span class="risk-badge">CRITICAL</span>
                                    <span class="violation-file">app/api/endpoints/admin.py</span>
                                    <span class="line-number">Line 78</span>
                                </div>
                                <div class="violation-description">
                                    Admin endpoint accessible without role check
                                </div>
                                <div class="violation-evidence">
                                    <label>Evidence:</label>
                                    <code># TODO: Add role validation</code>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Compliant Areas -->
                <div class="compliant-areas">
                    <h4>Compliant Areas (2)</h4>
                    <ul class="compliant-list">
                        <li class="compliant-item">
                            <span class="check-icon">✓</span>
                            Role model properly defined in database
                        </li>
                        <li class="compliant-item">
                            <span class="check-icon">✓</span>
                            Permission system implemented
                        </li>
                    </ul>
                </div>

                <!-- Multi-dimensional Insights -->

                <!-- Performance Metrics -->
                <div class="performance-metrics">
                    <h4>Analysis Performance</h4>
                    <div class="metrics-grid">
                        <div class="metric">
                            <label>Execution Time:</label>
                            <value>2s</value>
                        </div>
                    </div>
                </div>
            </div>

            <div class="adr-actions">
                <button class="btn btn-secondary" onclick="toggleADRDetails('ADR-002')">
                    Show More Details
                </button>
            </div>
        </div>
    </div>
</section>

<!-- Detailed Analysis Timeline -->
<section id="analysis-timeline" class="report-section">
    <h2 class="section-title">Analysis Process Timeline</h2>

    <div class="timeline-container">
        <div class="timeline-item">
            <div class="timeline-marker">
                <span class="step-number">1</span>
            </div>
            <div class="timeline-content">
                <h4>ADR Discovery</h4>
                <p>Discovered and analyzed 12.0 Architecture Decision Records</p>
                <div class="step-findings">
                    <label>Key Findings:</label>
                    <ul>
                        <li>Found 12.0 ADRs in the repository</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="timeline-item">
            <div class="timeline-marker">
                <span class="step-number">2</span>
            </div>
            <div class="timeline-content">
                <h4>Compliance Analysis</h4>
                <p>Analyzed code compliance with each ADR using Claude Code SDK</p>
                <div class="step-findings">
                    <label>Key Findings:</label>
                    <ul>
                        <li>Identified 3 total violations</li>
                        <li>Average compliance score: 73.5%</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="timeline-item">
            <div class="timeline-marker">
                <span class="step-number">3</span>
            </div>
            <div class="timeline-content">
                <h4>Architectural Hotspot Analysis</h4>
                <p>Analyzed git history and code complexity to identify risk hotspots</p>
                <div class="step-findings">
                    <label>Key Findings:</label>
                    <ul>
                        <li>Identified 2 architectural hotspots</li>
                        <li>Critical risk files: 1</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="timeline-item">
            <div class="timeline-marker">
                <span class="step-number">4</span>
            </div>
            <div class="timeline-content">
                <h4>Analysis Complete</h4>
                <p>All analysis dimensions completed</p>
                <span class="duration">Duration: 42s</span>
                <div class="step-findings">
                    <label>Key Findings:</label>
                    <ul>
                        <li>Total execution time: 42.70 seconds</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
.adr-analysis-container {
    display: grid;
    gap: 2rem;
}

.adr-detail-card {
    background: var(--card-bg, #fff);
    border: 1px solid var(--border-color, #e0e0e0);
    border-radius: 8px;
    padding: 1.5rem;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.adr-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 2px solid var(--border-color, #e0e0e0);
}

.adr-header h3 {
    margin: 0;
    color: var(--heading-color, #333);
}

.score-badge {
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-weight: bold;
    font-size: 1.1rem;
}

.score-badge.score-4 { background-color: #4caf50; color: white; }
.score-badge.score-3 { background-color: #8bc34a; color: white; }
.score-badge.score-2 { background-color: #ffc107; color: #333; }
.score-badge.score-1 { background-color: #ff9800; color: white; }
.score-badge.score-0 { background-color: #f44336; color: white; }

.analysis-methods {
    margin-bottom: 1.5rem;
}

.method-badges {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
    margin-top: 0.5rem;
}

.method-badge {
    padding: 0.25rem 0.75rem;
    border-radius: 4px;
    font-size: 0.875rem;
    background-color: #e3f2fd;
    color: #1976d2;
    border: 1px solid #1976d2;
}

.method-badge.method-semantic-claude-code { background-color: #f3e5f5; color: #7b1fa2; border-color: #7b1fa2; }
.method-badge.method-git-forensics { background-color: #e8f5e9; color: #388e3c; border-color: #388e3c; }
.method-badge.method-static-analysis { background-color: #fff3e0; color: #f57c00; border-color: #f57c00; }
.method-badge.method-rag-enhanced { background-color: #fce4ec; color: #c2185b; border-color: #c2185b; }

.confidence-indicator {
    margin-top: 0.5rem;
    font-size: 0.9rem;
}

.confidence-value {
    font-weight: bold;
    color: #1976d2;
}

.requirements-section,
.violations-summary,
.compliant-areas,
.insights-section,
.performance-metrics {
    margin-bottom: 1.5rem;
}

.requirements-section h4,
.violations-summary h4,
.compliant-areas h4,
.insights-section h4,
.performance-metrics h4 {
    margin-bottom: 0.75rem;
    color: var(--heading-color, #555);
}

.requirements-list,
.compliant-list {
    list-style: none;
    padding: 0;
}

.requirement-item,
.compliant-item {
    padding: 0.5rem 0;
    border-bottom: 1px solid #f0f0f0;
}

.compliant-item .check-icon {
    color: #4caf50;
    margin-right: 0.5rem;
    font-weight: bold;
}

.risk-counts {
    display: flex;
    gap: 1rem;
    margin-bottom: 1rem;
}

.risk-count {
    padding: 0.25rem 0.75rem;
    border-radius: 4px;
    font-size: 0.875rem;
    font-weight: bold;
}

.risk-count.critical { background-color: #ffebee; color: #c62828; }
.risk-count.high { background-color: #fff3e0; color: #e65100; }
.risk-count.medium { background-color: #fff8e1; color: #f9a825; }
.risk-count.low { background-color: #f1f8e9; color: #558b2f; }

.violation-item {
    background-color: #f5f5f5;
    padding: 0.75rem;
    border-radius: 4px;
    margin-bottom: 0.75rem;
    border-left: 4px solid;
}

.violation-item.risk-critical { border-left-color: #f44336; }
.violation-item.risk-high { border-left-color: #ff9800; }
.violation-item.risk-medium { border-left-color: #ffc107; }
.violation-item.risk-low { border-left-color: #8bc34a; }

.violation-header {
    display: flex;
    gap: 1rem;
    align-items: center;
    margin-bottom: 0.5rem;
}

.risk-badge {
    padding: 0.2rem 0.5rem;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: bold;
    text-transform: uppercase;
}

.violation-evidence {
    margin-top: 0.5rem;
    font-size: 0.875rem;
}

.violation-evidence code {
    background-color: #f0f0f0;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    display: block;
    margin-top: 0.25rem;
    overflow-x: auto;
}

.insights-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.insight-item {
    padding: 0.75rem;
    background-color: #e8f5e9;
    border-radius: 4px;
    border-left: 3px solid #4caf50;
}

.insight-type {
    font-weight: bold;
    color: #2e7d32;
    margin-right: 0.5rem;
}

.metrics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 1rem;
}

.metric {
    background-color: #f5f5f5;
    padding: 0.75rem;
    border-radius: 4px;
    text-align: center;
}

.metric label {
    display: block;
    font-size: 0.875rem;
    color: #666;
}

.metric value {
    display: block;
    font-size: 1.25rem;
    font-weight: bold;
    color: #1976d2;
}

.timeline-container {
    position: relative;
    padding-left: 3rem;
}

.timeline-container::before {
    content: '';
    position: absolute;
    left: 1.5rem;
    top: 0;
    bottom: 0;
    width: 2px;
    background-color: #e0e0e0;
}

.timeline-item {
    position: relative;
    margin-bottom: 2rem;
}

.timeline-marker {
    position: absolute;
    left: -1.5rem;
    width: 3rem;
    height: 3rem;
    background-color: #1976d2;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: bold;
}

.timeline-content {
    background-color: #f5f5f5;
    padding: 1rem;
    border-radius: 4px;
}

.timeline-content h4 {
    margin: 0 0 0.5rem 0;
    color: #333;
}

.duration {
    display: inline-block;
    margin-top: 0.5rem;
    font-size: 0.875rem;
    color: #666;
    font-style: italic;
}

.step-findings {
    margin-top: 0.75rem;
}

.step-findings ul {
    margin: 0.5rem 0 0 1.5rem;
    padding: 0;
}

.adr-actions {
    margin-top: 1.5rem;
    padding-top: 1rem;
    border-top: 1px solid #e0e0e0;
    display: flex;
    gap: 1rem;
}

.btn {
    padding: 0.5rem 1rem;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.875rem;
    transition: background-color 0.2s;
}

.btn-primary {
    background-color: #1976d2;
    color: white;
}

.btn-primary:hover {
    background-color: #1565c0;
}

.btn-secondary {
    background-color: #757575;
    color: white;
}

.btn-secondary:hover {
    background-color: #616161;
}

.no-violations {
    color: #4caf50;
    font-weight: 500;
}

.more-items {
    font-style: italic;
    color: #666;
    font-size: 0.875rem;
}
</style>

<script>
function toggleADRDetails(adrId) {
    const card = document.querySelector(`[data-adr-id="${adrId}"]`);
    const content = card.querySelector('.adr-content');
    const button = card.querySelector('.btn-secondary');

    if (content.classList.contains('expanded')) {
        content.classList.remove('expanded');
        button.textContent = 'Show More Details';
    } else {
        content.classList.add('expanded');
        button.textContent = 'Show Less Details';
    }
}

function showRemediationPlan(adrId) {
    // This would open a modal or navigate to remediation details
    console.log('Show remediation plan for:', adrId);
}
</script>
    <!-- Hotspot Analysis -->
<section class="section hotspot-analysis">
    <h2>Architectural Hotspots</h2>

    <div class="hotspot-summary">
        <h3>Summary</h3>
        <p>Mixed: 0% improving, 0% degrading</p>

        <div class="stats-grid">
            <div class="stat">
                <label>Total Hotspots</label>
                <div class="value">2</div>
            </div>
            <div class="stat">
                <label>Critical Risk</label>
                <div class="value risk-critical">1</div>
            </div>
            <div class="stat">
                <label>Average Risk</label>
                <div class="value">83.5%</div>
            </div>
        </div>
    </div>

    <div class="hotspot-list">
        <h3>Top Risk Areas</h3>
        <table>
            <thead>
                <tr>
                    <th>File</th>
                    <th>Risk Score</th>
                    <th>Confidence</th>
                    <th>Violations</th>
                    <th>Category</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>app&amp;#x2F;api&amp;#x2F;endpoints&amp;#x2F;admin.py</td>
                    <td class="risk-critical">
                        9200.0%
                    </td>
                    <td>N/A</td>
                    <td>3</td>
                    <td>
                        <span class="badge badge-critical">
                            Critical
                        </span>
                    </td>
                </tr>
                <tr>
                    <td>app&amp;#x2F;core&amp;#x2F;auth.py</td>
                    <td class="risk-critical">
                        7500.0%
                    </td>
                    <td>N/A</td>
                    <td>1</td>
                    <td>
                        <span class="badge badge-critical">
                            Critical
                        </span>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="chart-container" id="temporal-trends-chart"></div>
    <div class="chart-container" id="hotspot-heatmap"></div>
</section>
    <!-- Violations Detail -->
<section class="section violations">
    <h2>ADR Violations</h2>

    <div class="violations-summary">
        <p>Total violations found: <strong>3</strong></p>
    </div>

    <div class="violations-table">
        <table>
            <thead>
                <tr>
                    <th>File</th>
                    <th>Line</th>
                    <th>ADR</th>
                    <th>Risk</th>
                    <th>Message</th>
                    <th>Impact</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>app/api/endpoints/admin.py</td>
                    <td>78</td>
                    <td>ADR-002</td>
                    <td>
                        <span class="badge badge-critical">
                            CRITICAL
                        </span>
                    </td>
                    <td></td>
                    <td>Severe - Potential security breach or compliance failure</td>
                </tr>
                <tr>
                    <td>app/api/endpoints/users.py</td>
                    <td>45</td>
                    <td>ADR-001</td>
                    <td>
                        <span class="badge badge-high">
                            HIGH
                        </span>
                    </td>
                    <td></td>
                    <td>High - Significant operational or security risk</td>
                </tr>
                <tr>
                    <td>app/core/auth.py</td>
                    <td>123</td>
                    <td>ADR-001</td>
                    <td>
                        <span class="badge badge-medium">
                            MEDIUM
                        </span>
                    </td>
                    <td></td>
                    <td>Moderate - May impact system reliability or maintainability</td>
                </tr>
            </tbody>
        </table>

    </div>
</section>
    <!-- Recommendations -->
<!-- Recommendations Section -->
<section id="recommendations" class="report-section">
    <h2 class="section-title">Recommendations</h2>

    <div class="recommendations-container">
        <div class="recommendation-card priority-critical">
            <div class="rec-header">
                <span class="priority-badge">CRITICAL</span>
                <span class="category">Security</span>
            </div>

            <div class="rec-content">
                <h4>Implement role-based access control for all admin endpoints</h4>

                <div class="effort">
                    <label>Estimated Effort:</label>
                    <span>1 week</span>
                </div>

                <div class="impact">
                    <label>Impact:</label>
                    <span>Prevents unauthorized access to sensitive operations</span>
                </div>

            </div>
        </div>
        <div class="recommendation-card priority-high">
            <div class="rec-header">
                <span class="priority-badge">HIGH</span>
                <span class="category">Security</span>
            </div>

            <div class="rec-content">
                <h4>Add authentication to all API endpoints</h4>

                <div class="effort">
                    <label>Estimated Effort:</label>
                    <span>3 days</span>
                </div>

                <div class="impact">
                    <label>Impact:</label>
                    <span>Ensures all APIs are properly secured</span>
                </div>

            </div>
        </div>
        <div class="recommendation-card priority-medium">
            <div class="rec-header">
                <span class="priority-badge">MEDIUM</span>
                <span class="category">Architecture</span>
            </div>

            <div class="rec-content">
                <h4>Refactor authentication module to reduce complexity</h4>

                <div class="effort">
                    <label>Estimated Effort:</label>
                    <span>5 days</span>
                </div>

                <div class="impact">
                    <label>Impact:</label>
                    <span>Improves maintainability and reduces bugs</span>
                </div>

            </div>
        </div>
    </div>
</section>

<style>
.recommendations-container {
    display: grid;
    gap: 1.5rem;
}

.recommendation-card {
    background: var(--card-bg, #fff);
    border: 1px solid var(--border-color, #e0e0e0);
    border-radius: 8px;
    padding: 1.5rem;
    border-left: 4px solid;
}

.recommendation-card.priority-critical {
    border-left-color: #f44336;
}

.recommendation-card.priority-high {
    border-left-color: #ff9800;
}

.recommendation-card.priority-medium {
    border-left-color: #ffc107;
}

.recommendation-card.priority-low {
    border-left-color: #4caf50;
}

.rec-header {
    display: flex;
    gap: 1rem;
    align-items: center;
    margin-bottom: 1rem;
}

.priority-badge {
    padding: 0.25rem 0.75rem;
    border-radius: 4px;
    font-size: 0.875rem;
    font-weight: bold;
    color: white;
}

.priority-badge:has-text("CRITICAL") {
    background-color: #f44336;
}

.priority-badge:has-text("HIGH") {
    background-color: #ff9800;
}

.priority-badge:has-text("MEDIUM") {
    background-color: #ffc107;
    color: #333;
}

.priority-badge:has-text("LOW") {
    background-color: #4caf50;
}

.category {
    color: #666;
    font-size: 0.875rem;
}

.rec-content h4 {
    margin: 0 0 1rem 0;
    color: #333;
}

.effort, .impact {
    margin-bottom: 0.75rem;
}

.effort label, .impact label {
    font-weight: bold;
    margin-right: 0.5rem;
}

.steps {
    margin-top: 1rem;
}

.steps label {
    font-weight: bold;
    display: block;
    margin-bottom: 0.5rem;
}

.steps ol {
    margin: 0.5rem 0 0 1.5rem;
    padding: 0;
}
</style>
    <!-- Visualizations -->
<!-- Visualizations Section -->
<section id="visualizations" class="report-section">
    <h2 class="section-title">Visualizations</h2>

    <div class="charts-grid">
        <div class="chart-container">
            <h3>Temporal Trends</h3>
            <canvas id="temporal-trends-chart"></canvas>
        </div>

        <div class="chart-container">
            <h3>Top Violated Files</h3>
            <canvas id="top-files-chart"></canvas>
        </div>

        <div class="chart-container full-width">
            <h3>Risk Hotspot Heatmap</h3>
            <canvas id="hotspot-heatmap"></canvas>
        </div>
    </div>
</section>

<style>
.charts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
}

.chart-container {
    background: var(--card-bg, #fff);
    padding: 1.5rem;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.chart-container.full-width {
    grid-column: 1 / -1;
}

.chart-container h3 {
    margin: 0 0 1rem 0;
    color: #333;
    font-size: 1.1rem;
}

.chart-container canvas {
    max-height: 300px;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Temporal Trends Chart
    (function() {
        const ctx = document.getElementById('temporal-trends-chart').getContext('2d');
        const data = {"colors": ["#4caf50", "#ff9800", "#f44336"], "labels": ["Improving", "Stable", "Degrading"], "values": [0.0, 0.0, 0.0]};
        new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: data.labels,
                datasets: [{
                    data: data.values,
                    backgroundColor: data.colors,
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            }
        });
    })();

    // Top Files Bar Chart
    (function() {
        const ctx = document.getElementById('top-files-chart').getContext('2d');
        const data = {"color": "#1976d2", "labels": ["app/api/endpoints/users.py", "app/core/auth.py", "app/api/endpoints/admin.py"], "values": [1, 1, 1]};
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: data.labels,
                datasets: [{
                    label: 'Violations',
                    data: data.values,
                    backgroundColor: data.color,
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    })();

    // Hotspot Heatmap
    (function() {
        const ctx = document.getElementById('hotspot-heatmap').getContext('2d');
        const data = {"colorScale": "Reds", "labels": ["app\u0026#x2F;api\u0026#x2F;endpoints\u0026#x2F;admin.py", "app\u0026#x2F;core\u0026#x2F;auth.py"], "values": [92.0, 75.0]};

        // Create gradient colors based on risk scores
        const colors = data.values.map(value => {
            const intensity = value / 100;
            return `rgba(255, ${Math.floor(255 * (1 - intensity))}, ${Math.floor(255 * (1 - intensity))}, 0.8)`;
        });

        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: data.labels,
                datasets: [{
                    label: 'Risk Score',
                    data: data.values,
                    backgroundColor: colors,
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                scales: {
                    x: {
                        beginAtZero: true,
                        max: 100
                    }
                }
            }
        });
    })();
});
</script>
    <!-- Metadata -->
    <section id="metadata" class="report-section">
        <h2 class="section-title">Report Metadata</h2>
        <div class="metadata-grid">
            <div class="metadata-item">
                <label>Report ID</label>
                <value>5901b4a8-199c-4dcf-8c8f-a0f8c90a13ca</value>
            </div>
            <div class="metadata-item">
                <label>Repository</label>
                <value>/Users/test/violentutf-api</value>
            </div>
            <div class="metadata-item">
                <label>Analysis Mode</label>
                <value>Comprehensive</value>
            </div>
            <div class="metadata-item">
                <label>Analysis Duration</label>
                <value>42s</value>
            </div>
        </div>
    </section>
        </main>

        <!-- Footer -->
        <footer class="report-footer">
            <div class="footer-content">
                <p class="security-level">
                    Security Level: <span class="badge badge-internal">INTERNAL</span>
                </p>
                <p class="generation-info">
                    Generated by Enhanced Reporting Module v2.0.0
                </p>
            </div>
        </footer>
    </div>

    <!-- JavaScript -->
    <script>
// Main JavaScript for Architectural Audit Report

// Wait for DOM to be ready
document.addEventListener('DOMContentLoaded', function() {
    'use strict';

    // Initialize all components
    initializeNavigation();
    initializeScoreAnimation();
    initializeCharts();
    initializeInteractiveElements();
    initializeAccessibility();
});

// Navigation handling
function initializeNavigation() {
    const navLinks = document.querySelectorAll('.nav-link');
    const sections = document.querySelectorAll('section[id], div[id]');

    // Smooth scrolling for navigation links
    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const targetId = this.getAttribute('href').substring(1);
            const targetSection = document.getElementById(targetId);

            if (targetSection) {
                targetSection.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });

                // Update URL without page jump
                history.pushState(null, null, '#' + targetId);
            }
        });
    });

    // Active section highlighting
    function updateActiveNav() {
        const scrollPosition = window.scrollY + 100;

        sections.forEach(section => {
            const top = section.offsetTop;
            const height = section.offsetHeight;
            const id = section.getAttribute('id');

            if (scrollPosition >= top && scrollPosition < top + height) {
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === '#' + id) {
                        link.classList.add('active');
                    }
                });
            }
        });
    }

    // Throttle scroll events
    let scrollTimer;
    window.addEventListener('scroll', function() {
        if (scrollTimer) {
            clearTimeout(scrollTimer);
        }
        scrollTimer = setTimeout(updateActiveNav, 100);
    });

    // Initial call
    updateActiveNav();
}

// Score circle animation
function initializeScoreAnimation() {
    const scoreCircle = document.querySelector('.score-circle');

    if (scoreCircle) {
        const score = parseFloat(scoreCircle.getAttribute('data-score') || '0');
        const progressCircle = scoreCircle.querySelector('.score-progress');

        if (progressCircle) {
            // Calculate stroke offset based on score
            const circumference = 2 * Math.PI * 90; // radius = 90
            const offset = circumference - (score / 100) * circumference;

            // Set initial state
            progressCircle.style.strokeDasharray = circumference;
            progressCircle.style.strokeDashoffset = circumference;

            // Trigger animation after a small delay
            setTimeout(() => {
                progressCircle.style.transition = 'stroke-dashoffset 1.5s ease-out';
                progressCircle.style.strokeDashoffset = offset;

                // Also set color based on score
                if (score < 50) {
                    progressCircle.style.stroke = 'var(--danger-color)';
                } else if (score < 70) {
                    progressCircle.style.stroke = 'var(--warning-color)';
                } else if (score < 85) {
                    progressCircle.style.stroke = 'var(--info-color)';
                } else {
                    progressCircle.style.stroke = 'var(--success-color)';
                }
            }, 100);

            // Animate the score number
            animateValue(scoreCircle.querySelector('.score-value'), 0, score, 1500);
        }
    }
}

// Animate numeric values
function animateValue(element, start, end, duration) {
    if (!element) return;

    const startTime = performance.now();
    const endTime = startTime + duration;

    function update() {
        const now = performance.now();
        const progress = Math.min((now - startTime) / duration, 1);

        // Ease out quad
        const easeProgress = 1 - (1 - progress) * (1 - progress);
        const value = start + (end - start) * easeProgress;

        element.textContent = value.toFixed(1) + '%';

        if (progress < 1) {
            requestAnimationFrame(update);
        }
    }

    requestAnimationFrame(update);
}

// Initialize charts
function initializeCharts() {
    // Risk distribution chart
    const riskDistChart = document.getElementById('risk-distribution-chart');
    if (riskDistChart && typeof Chart !== 'undefined') {
        const ctx = riskDistChart.getContext('2d');

        // Get data from the page or use defaults
        const riskData = {
            labels: ['Critical', 'High', 'Medium', 'Low'],
            values: [
                parseInt(document.querySelector('.risk-critical td:nth-child(2)')?.textContent || '0'),
                parseInt(document.querySelector('.risk-high td:nth-child(2)')?.textContent || '0'),
                parseInt(document.querySelector('.risk-medium td:nth-child(2)')?.textContent || '0'),
                parseInt(document.querySelector('.risk-low td:nth-child(2)')?.textContent || '0')
            ],
            colors: ['#f44336', '#ff5722', '#ff9800', '#4caf50']
        };

        new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: riskData.labels,
                datasets: [{
                    data: riskData.values,
                    backgroundColor: riskData.colors,
                    borderWidth: 2,
                    borderColor: '#fff'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 15,
                            font: {
                                size: 12
                            }
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                const label = context.label || '';
                                const value = context.parsed || 0;
                                const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                const percentage = total > 0 ? ((value / total) * 100).toFixed(1) : 0;
                                return label + ': ' + value + ' (' + percentage + '%)';
                            }
                        }
                    }
                }
            }
        });
    }

    // Initialize other charts that might be dynamically added
    document.querySelectorAll('.chart-container canvas').forEach(canvas => {
        if (canvas.id && !canvas.chart) {
            initializeChartFromElement(canvas);
        }
    });
}

// Initialize chart from data attributes or inline configuration
function initializeChartFromElement(canvas) {
    const ctx = canvas.getContext('2d');
    const configScript = canvas.parentElement.querySelector('script[type="application/json"]');

    if (configScript) {
        try {
            const config = JSON.parse(configScript.textContent);
            canvas.chart = new Chart(ctx, config);
        } catch (e) {
            console.error('Failed to parse chart configuration:', e);
        }
    }
}

// Interactive elements
function initializeInteractiveElements() {
    // Collapsible sections
    document.querySelectorAll('.collapsible').forEach(element => {
        element.addEventListener('click', function() {
            this.classList.toggle('active');
            const content = this.nextElementSibling;
            if (content.style.maxHeight) {
                content.style.maxHeight = null;
            } else {
                content.style.maxHeight = content.scrollHeight + 'px';
            }
        });
    });

    // Copy to clipboard for code blocks
    document.querySelectorAll('pre code').forEach(block => {
        const button = document.createElement('button');
        button.className = 'copy-button';
        button.textContent = 'Copy';
        button.addEventListener('click', function() {
            navigator.clipboard.writeText(block.textContent).then(() => {
                button.textContent = 'Copied!';
                setTimeout(() => {
                    button.textContent = 'Copy';
                }, 2000);
            });
        });
        block.parentElement.appendChild(button);
    });

    // Table sorting
    document.querySelectorAll('table.sortable').forEach(table => {
        const headers = table.querySelectorAll('th');
        headers.forEach((header, index) => {
            header.style.cursor = 'pointer';
            header.addEventListener('click', () => sortTable(table, index));
        });
    });
}

// Table sorting function
function sortTable(table, column) {
    const tbody = table.querySelector('tbody');
    const rows = Array.from(tbody.querySelectorAll('tr'));
    const isNumeric = rows.length > 0 && !isNaN(rows[0].cells[column].textContent);

    rows.sort((a, b) => {
        const aValue = a.cells[column].textContent;
        const bValue = b.cells[column].textContent;

        if (isNumeric) {
            return parseFloat(aValue) - parseFloat(bValue);
        }
        return aValue.localeCompare(bValue);
    });

    // Toggle sort direction
    if (table.sortColumn === column) {
        rows.reverse();
        table.sortColumn = -1;
    } else {
        table.sortColumn = column;
    }

    // Reappend rows
    rows.forEach(row => tbody.appendChild(row));
}

// Accessibility enhancements
function initializeAccessibility() {
    // Skip to main content link
    const skipLink = document.createElement('a');
    skipLink.href = '#main-content';
    skipLink.className = 'skip-link';
    skipLink.textContent = 'Skip to main content';
    document.body.insertBefore(skipLink, document.body.firstChild);

    // Keyboard navigation for interactive elements
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            // Close any open modals or dropdowns
            document.querySelectorAll('.modal.open').forEach(modal => {
                modal.classList.remove('open');
            });
        }
    });

    // Focus management
    const focusableElements = 'a[href], button, input, select, textarea, [tabindex]:not([tabindex="-1"])';
    const firstFocusable = document.querySelector(focusableElements);

    // Trap focus in modals
    document.querySelectorAll('.modal').forEach(modal => {
        const focusableContent = modal.querySelectorAll(focusableElements);
        const firstFocusableElement = focusableContent[0];
        const lastFocusableElement = focusableContent[focusableContent.length - 1];

        modal.addEventListener('keydown', function(e) {
            if (e.key === 'Tab') {
                if (e.shiftKey) {
                    if (document.activeElement === firstFocusableElement) {
                        lastFocusableElement.focus();
                        e.preventDefault();
                    }
                } else {
                    if (document.activeElement === lastFocusableElement) {
                        firstFocusableElement.focus();
                        e.preventDefault();
                    }
                }
            }
        });
    });
}

// Utility functions
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

function throttle(func, limit) {
    let inThrottle;
    return function(...args) {
        if (!inThrottle) {
            func.apply(this, args);
            inThrottle = true;
            setTimeout(() => inThrottle = false, limit);
        }
    };
}

// Export functions for external use
window.reportUtils = {
    animateValue,
    sortTable,
    debounce,
    throttle
};    </script>

<script>
    // Initialize risk distribution chart
    (function() {
        const ctx = document.getElementById('risk-distribution-chart').getContext('2d');
        // Parse JSON data safely
        const configData = document.createElement('script');
        configData.type = 'application/json';
        configData.id = 'chart-config-data';
        configData.textContent = "{\"type\": \"pie\", \"data\": {\"labels\": [\"Critical\", \"High\", \"Medium\", \"Low\"], \"values\": [1, 1, 1, 0], \"colors\": [\"#d32f2f\", \"#f57c00\", \"#fbc02d\", \"#388e3c\"]}}";
        document.head.appendChild(configData);
        const config = JSON.parse(document.getElementById('chart-config-data').textContent);
        new Chart(ctx, config);
        configData.remove();
    })();

    // Animate compliance score
    document.addEventListener('DOMContentLoaded', function() {
        const scoreCircle = document.querySelector('.score-progress');
        if (scoreCircle) {
            scoreCircle.style.animation = 'scoreAnimation 1.5s ease-out forwards';
        }
    });
</script>
</body>
</html>
